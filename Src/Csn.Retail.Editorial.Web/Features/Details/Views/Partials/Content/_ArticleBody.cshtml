@using Csn.Retail.Editorial.Web.Features.Details.Models
@using Csn.Retail.Editorial.Web.Features.Shared.Proxies.EditorialApi
@model ArticleViewModel

@{
    var dropCap = Model.UseDropCase ? "drop-cap" : "";
    var narrowCap = Model.ArticleTemplateType == ArticleTemplateType.Narrow ? "narrow" : string.Empty;
    var loadBrightcove = false;
}

<div class="article__copy @dropCap @narrowCap">
    @foreach (var contentSection in Model.ContentSections)
    {
        // use convention based mapping for determining the view (based on section type)
        Html.RenderPartial($"Partials/ContentSections/_{contentSection.SectionType}", contentSection);
        
        if (!loadBrightcove && $"{contentSection.SectionType}" == "BrightcoveVideo")
        {
            loadBrightcove = true;
            <script src="https://players.brightcove.net/674523943001/@(contentSection.BrightcoveVideo.PlayerId)_default/index.js" async></script>
        }
    }
</div>