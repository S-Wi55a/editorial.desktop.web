<?xml version="1.0"?>

<!-- For more information on using Web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=301874 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <Ingress.CacheSettings xdt:Transform="Replace">
    <add name="Enabled" value="true" />
  </Ingress.CacheSettings>
  <connectionStrings xdt:Transform="Replace">
    <add name="RedisServer" connectionString="cars-redis-cache-01.aws.csprd.com.au:6379,cars-redis-cache-02.aws.csprd.com.au:6379,cars-redis-cache-03.aws.csprd.com.au:6379,connectTimeout=1000,abortConnect=false,connectRetry=1,KeepAlive=180" />
  </connectionStrings>
  <CircuitBreakerSettings Disabled="False" DefaultHeartBeatInMs="10000" DefaultHistoryBufferSize="100" DefaultTimeoutThreshold="5" DefaultFailureThreshold="5" DefaultQueueLengthThreshold="1000" DefaultThreadDurationTimeoutInMs="1000" DefaultThreadExecutionTimeoutInMs="900" DefaultThreadAbortTimeoutInMs="2000" DefaultNumThreads="20" xdt:Transform="Replace">
    <Circuits>
      <Circuit Name="SiteNavApiProxy" HeartBeatInMs="10000" LatencyThresholdInMs="5000" QueueLengthThreshold="1000" ThreadDurationTimeoutInMs="3000" ThreadExecutionTimeoutInMs="2000" ThreadAbortTimeoutInMs="4000" />
      <Circuit Name="EditorialApiProxy" HeartBeatInMs="10000" LatencyThresholdInMs="3000" QueueLengthThreshold="1000" ThreadDurationTimeoutInMs="5000" ThreadExecutionTimeoutInMs="4000" ThreadAbortTimeoutInMs="4000" />
    </Circuits>
  </CircuitBreakerSettings>
  <HystrixRestClientSettings xdt:Transform="Replace">
    <Hosts>
      <Host Name="SiteNavApiProxy" BaseUrl="http://sitenav.carsalesnetwork.com.au/v2" TimeoutInMs="1000" RetryOnFailure="1" CircuitConfig="SiteNavApiProxy" />
      <Host Name="EditorialApiProxy" BaseUrl="http://retaileditorial.service.csprd.com.au" TimeoutInMs="2000" RetryOnFailure="2" CircuitConfig="EditorialApiProxy" />
    </Hosts>
  </HystrixRestClientSettings>
  
  <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" />
    <machineKey validationKey="6735077DB8518E3A401ADD906260AA77358B17437512146257D3B29B36D677CB2D9A59D8C86F356CB8F483EBCB876D7F38E6138E18B81EF4FCF7EA9590408AAB" decryptionKey="044D9B65E98FB42A8AE4BD03731AAF9F615B139CA29EB23113EBCB3ABBE6026F" validation="SHA1" decryption="AES" compatibilityMode="Framework20SP2" xdt:Transform="Replace" />

    <customErrors defaultRedirect="/error/500"
        mode="RemoteOnly" xdt:Transform="Replace">
      <error statusCode="500" redirect="/error/500" />
      <error statusCode="400" redirect="/error/" />
      <error statusCode="404" redirect="/error/404" />
    </customErrors>
  </system.web>

  <appSettings>
    <add key="AssetDomain" value="//resource.csnstatic.com/retail/editorial/" xdt:Transform="SetAttributes" xdt:Locator="Match(key)" />
  </appSettings>

</configuration>
